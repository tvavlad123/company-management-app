<head>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>

  <div class="container">
    <div class="row">
      <div class="col-md-4 col-offset-2 text-center">
        <div id="custom-search-input">
          <div class="input-group col-md-10">
            <input type="text" class="form-control input-lg" placeholder="Search for your colleagues..." [(ngModel)]="username" (keyup)="onKeyUp()"
            />
          </div>
          <div class="searchDiv col-md-11">
            <li style="list-style: none;" *ngFor="let searchUser of searchUsers" (click)="goToProfile(searchUser)">
              <img class="circular-square" src={{searchUser.photoLocation}}>
              <font size="3">{{ searchUser.firstName }} {{ searchUser.lastName }} </font>
              <br>
              <br>
            </li>
          </div>
        </div>
      </div>

      <div class="col-md-4 text-right">
        <ul class="nav navbar-nav">
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown"> <span class="glyphicon glyphicon-cog pull-right"></span></a>
            <ul class="dropdown-menu">
              <li><a href="changepassword">Change Password<span class="glyphicon glyphicon-wrench pull-right"></span></a></li>
              <li class="divider"></li>
              <li><a routerLink="/loginpage">Sign Out<span class="glyphicon glyphicon-log-out pull-right"></span></a></li>
            </ul>
          </li>
        </ul>
      </div>


    </div>
  </div>

  <div class="col-md-12">
    <div class="top-photo">
      <img src="http://i.imgur.com/WTLCMey.jpg">
    </div>

    <div class="user">
      <img class="img-circle" placeholder="https://conferencecloud-assets.s3.amazonaws.com/default_avatar.png" src={{user.photoLocation}}>
    </div>


    <div class="col-lg-15 col-sm-15">
      <div class="btn-pref btn-group btn-group-justified btn-group-lg" role="group" aria-label="...">

        <div class="btn-group" role="group">
          <button type="button" id="stars" class="btn btn-primary" href="#tab1" data-toggle="tab"><span class="glyphicon glyphicon-home" aria-hidden="true"></span>
                <div class="hidden-xs">My profile</div>
            </button>
        </div>

        <div class="btn-group" role="group">
          <button type="button" id="stars" class="btn btn-primary" href="#tab2" data-toggle="tab"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                <div class="hidden-xs">Edit profile</div>
            </button>
        </div>

        <div class="btn-group" role="group">
          <button type="button" id="stars" class="btn btn-primary" href="#tab3" (click)="loadMembers()" data-toggle="tab"><span class="glyphicon glyphicon-briefcase" aria-hidden="true"></span>
                <div class="hidden-xs">My Team</div>
            </button>
        </div>

        <div class="btn-group" role="group">
          <button type="button" id="stars" class="btn btn-primary" href="#tab4" (click)="loadRequests()" data-toggle="tab"><span class="glyphicon glyphicon-envelope" aria-hidden="true"></span>
                <div class="hidden-xs">My Requests</div>
            </button>
        </div>

      </div>
    </div>


    <div class="well">
      <div class="tab-content">
        <div class="tab-pane fade in active" id="tab1">

          <div class="about">
            <div class="container">
              <div class="row">

                <div class="col-md-6  col-md-offset-3  toppad">
                  <div class="panel panel-info">
                    <div class="panel-heading panelStyle">
                      <h4> Personal info </h4>
                    </div>
                    <div class="panel-body">
                      <div class="row">
                        <div class="col-md-12 col-lg-12 " align="center"> <img src="http://i.imgur.com/VYBWsND.png" class="img-circle img-responsive"> </div>
                        <table class="table table-user-information table-hover">
                          <tbody>
                            <tr>
                              <td>
                                <span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span> First name:</td>
                              <td>{{user.firstName}}</td>
                            </tr>
                            <tr>
                              <td>
                                <span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span> Last name:</td>
                              <td>{{user.lastName}}</td>
                            </tr>
                            <tr>
                              <td>
                                <span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span> Department:
                              </td>
                              <td>{{user.team.department.name}}</td>
                            </tr>
                            <tr>
                              <td>
                                <span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span> Team:
                              </td>
                              <td>
                                 <li *ngFor="let teamLeader of teamsLeader">
                                  {{ teamLeader.team.name }}
                                </li>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span> Position:
                              </td>
                              <td>{{user.position.name}}</td>
                            </tr>
                            <tr>
                              <td>
                                <span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span> Skills:
                              </td>
                              <td>
                                <li *ngFor="let userskill of userskills">
                                  {{ userskill.skill.name }}
                                  <span class="glyphicon glyphicon-search" aria-hidden="true"></span> {{ userskill.level.name
                                  }}
                                </li>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span> Languages:
                              </td>
                              <td>
                                <li *ngFor="let userlanguage of userlanguages">
                                  {{ userlanguage.language.name }}
                                  <span class="glyphicon glyphicon-search" aria-hidden="true"></span> {{ userlanguage.level.name
                                  }}
                                </li>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <app-calendar></app-calendar>
        </div>

        <div class="tab-pane fade in" id="tab2">
          <div class="container" style="padding-top: 60px;">
            <div class="">

              <!-- left column -->
              <div class="col-sm-3">
                <div class="text-center">
                  <h6>Upload a different photo...</h6>
                  <input type="file" accept="image/*" (change)="changeListener($event)">

                </div>
                <br>
                <br>
                <h5><b>Position</b></h5>
                <div class="form-group">
                  <select class="form-control" (ngModelChange)="onChange($event)" data-style="btn-primary" [(ngModel)]="selectedPosition" name="UserPositionName">
                    <option value="null" hidden> {{user.position.name}} </option>
                    <option *ngFor="let position of positions" [ngValue]="position"> 
                        {{position.name}} 
                    </option>
                  </select>
                  <br>
                </div>
              </div>

              <!-- edit form column -->
              <div class="col-sm-9 personal-info">
                <h4>Change your personal info
                  <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                </h4>
                <hr>


                <form class="form-horizontal" role="form">
                  <div class="form-group">
                    <div class="table-responsive">

                      <table id="mytable" class="table table-bordred table-striped table-hover skill-table">
                        <thead>
                          <th>Skill</th>
                          <th>Level</th>
                        </thead>
                        <tbody>
                          <tr *ngFor="let userskill of userskills" [class.selected]="userskill == selectedUserSkill" (click)="onSelect(userskill)">
                            <td class="col-md-3">
                              {{userskill.skill.name}}
                            </td>
                            <td class="col-md-5">
                              {{userskill.level.name}}
                            </td>
                            <td class="col-md-2">
                              <p data-placement="top" data-toggle="tooltip" title="Delete"><button class="btn btn-danger btn-xs" data-title="Delete" data-toggle="modal" data-target="#deleteUserSkill"><span class="glyphicon glyphicon-trash"></span></button></p>
                            </td>
                          </tr>
                        </tbody>
                      </table>

                      <div *ngIf="!showUserSkills">
                        <input class="btn btn-primary inputStyle" value="Add new skills" type="button" (click)="showSkillDetails()">
                      </div>
                      <br>

                      <table *ngIf="showUserSkills" id="mytable" class="table table-bordred table-striped">
                        <tbody>
                          <tr>
                            <td class="col-md-3">
                              <select class="form-control" [(ngModel)]="selectedUserSkillAdd" name="selectedUserSkillAdd">
                                 <option *ngFor="let remainingSkill of remainingSkills" [ngValue]="remainingSkill"> 
                                              {{remainingSkill.name}}
                                 </option>
                              </select>
                            </td>

                            <td class="col-md-5">
                              <select class="form-control" [(ngModel)]="selectedUserSkillLevelAdd" name="selectedUserSkillLevelAdd">
                                    <option *ngFor="let skillLevel of skillLevels" [ngValue]="skillLevel"> 
                                                {{skillLevel.name}}
                                    </option>
                                </select>
                            </td>

                            <td class="col-md-2">
                              <p data-placement="top" data-toggle="tooltip" title="Save"><button class="btn btn-danger btn-xs" data-title="Save" data-toggle="modal" data-target="#save"><span class="glyphicon glyphicon-floppy-saved" (click)="saveUserSkill()" ></span></button></p>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                      <input *ngIf="showUserSkills" class="btn btn-primary inputStyle" value="Finished? Click here!" type="button" (click)="closeSkillDetails()">
                      <br>
                      <br>
                      <table id="mytable" class="table table-bordred table-striped table-hover skill-table">
                        <thead>
                          <th>Language</th>
                          <th>Level</th>
                        </thead>
                        <tbody>
                          <tr *ngFor="let userlanguage of userlanguages" [class.selected]="userlanguage == selectedUserLanguage" (click)="onSelectLanguage(userlanguage)">
                            <td class="col-md-3">
                              {{userlanguage.language.name}}
                            </td>
                            <td class="col-md-5">
                              {{userlanguage.level.name}}
                            </td>
                            <td class="col-md-2">
                              <p data-placement="top" data-toggle="tooltip" title="Delete"><button class="btn btn-danger btn-xs" data-title="Delete" data-toggle="modal" data-target="#deleteUserLanguage"><span class="glyphicon glyphicon-trash"></span></button></p>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                      <div *ngIf="!showUserLanguages">
                        <input class="btn btn-primary inputStyle" value="Add new languages" type="button" (click)="showLanguageDetails()">
                      </div>


                      <table *ngIf="showUserLanguages" id="mytable" class="table table-bordred table-striped">
                        <tbody>
                          <tr>
                            <td class="col-md-3">
                              <select class="form-control" [(ngModel)]="selectedUserLanguageAdd" name="selectedUserLanguageAdd">
                                <option *ngFor="let remainingLanguage of remainingLanguages" [ngValue]="remainingLanguage"> 
                                                        {{remainingLanguage.name}}
                                 </option>
                              </select>
                            </td>

                            <td class="col-md-5">
                              <select class="form-control" [(ngModel)]="selectedUserLanguageLevelAdd" name="selectedUserLanguageLevelAdd">
                                 <option *ngFor="let languageLevel of languageLevels" [ngValue]="languageLevel">
                                                      {{languageLevel.name}}
                                 </option>
                                </select>
                            </td>

                            <td class="col-md-2">
                              <p data-placement="top" data-toggle="tooltip" title="Save"><button class="btn btn-danger btn-xs" data-title="Save" data-toggle="modal" data-target="#save"><span class="glyphicon glyphicon-floppy-saved" (click)="saveUserLanguage()" ></span></button></p>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                      <input *ngIf="showUserLanguages" class="btn btn-primary inputStyle" value="Finished? Click here!" type="button" (click)="closeLanguageDetails()">
                    </div>
                  </div>


                  <div class="modal fade" id="deleteUserSkill" tabindex="-1" role="dialog" aria-labelledby="edit" aria-hidden="true">
                    <div class="modal-dialog">
                      <div class="modal-content">
                        <div class="modal-header">
                          <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
                          <h4 class="modal-title custom_align" id="Heading">Delete this skill</h4>
                        </div>
                        <div class="modal-body">

                          <div class="alert alert-danger"><span class="glyphicon glyphicon-warning-sign"></span> Are you sure you want to delete this skill?</div>

                        </div>
                        <div class="modal-footer ">
                          <button type="button" class="btn btn-success" (click)="deleteUserSkill()"><span class="glyphicon glyphicon-ok-sign" data-dismiss="modal"></span> Yes</button>
                          <button type="button" class="btn btn-default" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span> No</button>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="modal fade" id="deleteUserLanguage" tabindex="-1" role="dialog" aria-labelledby="edit" aria-hidden="true">
                    <div class="modal-dialog">
                      <div class="modal-content">
                        <div class="modal-header">
                          <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
                          <h4 class="modal-title custom_align" id="Heading">Delete this language</h4>
                        </div>
                        <div class="modal-body">

                          <div class="alert alert-danger"><span class="glyphicon glyphicon-warning-sign"></span> Are you sure you want to delete this language?</div>

                        </div>
                        <div class="modal-footer ">
                          <button type="button" class="btn btn-success" (click)="deleteUserLanguage()" data-dismiss="modal"><span class="glyphicon glyphicon-ok-sign" ></span> Yes</button>
                          <button type="button" class="btn btn-default" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span> No</button>
                        </div>
                      </div>
                    </div>
                  </div>

                </form>
              </div>
            </div>
          </div>
        </div>

        <div class="tab-pane fade in" id="tab3">
          <div class="horizontal-div row">
              <br>
              <input class="form-control" type="text" placeholder="Search for team members"  [(ngModel)]="username2" (keyup)="onKeyUp2()"
              />
              <br>
              <div class="teamgradienttable table-responsive col-md-12">
                <table class="table">
                  <thead>
                    <tr>
                      <th class="col-md-3">Photo</th>
                      <th class="col-md-3">First Name</th>
                      <th class="col-md-3">Last Name</th>
                      <th class="col-md-3">Position</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let member of teamMembers" [class.selected]="member == selectedMember" (click)="goToProfile2(member)">
                      <td>
                        <img class="circular-square" src={{member.photoLocation}}>
                      </td>
                      <td>{{member.firstName}}</td>
                      <td>{{member.lastName}}</td>
                      <td>{{member.position.name}}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
          </div>
        </div>
        <Label style="font-size:20px;">Home Office Requests</Label>
        <div class="tab-pane fade in" id="tab4">
          <div class="col-md-12">
            <div class="teamgradienttable table-responsive col-md-12">
                <table class="table">
                  <thead>
                    <tr>
                      <th class="col-md-3">Name</th>
                      <th class="col-md-3">Start Date</th>
                      <th class="col-md-3">End Date</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let hoRequest of horequests">
                      <td>{{hoRequest.user.firstName}} {{hoRequest.user.lastName}}</td>
                      <td>{{hoRequest.request.start_date}}</td>
                      <td>{{hoRequest.request.end_date}}</td>
                      <button class="request-btn" (click)="acceptHORequest(hoRequest)"><span class="glyphicon glyphicon-ok"></span></button>
                      <button class="request-btn" (click)="declineHORequest(hoRequest)"><span class="glyphicon glyphicon-remove"></span></button>
                    </tr>
                  </tbody>
                </table>
              </div>

              <Label style="font-size:20px;">Vacation Requests</Label>
              <div class="teamgradienttable table-responsive col-md-12">
                <table class="table">
                  <thead>
                    <tr>
                      <th class="col-md-2">Name</th>
                      <th class="col-md-2">Start Date</th>
                      <th class="col-md-2">End Date</th>
                      <th class="col-md-4 pic">Picture</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let hoRequest of vrequests">
                      <td>{{hoRequest.user.firstName}} {{hoRequest.user.lastName}}</td>
                      <td>{{hoRequest.request.start_date}}</td>
                      <td>{{hoRequest.request.end_date}}</td>
                      <td><img src={{hoRequest.request.picture}}></td>
                      <button class="request-btn" (click)="acceptVRequest(hoRequest)"><span class="glyphicon glyphicon-ok"></span></button>
                      <button class="request-btn" (click)="declineVRequest(hoRequest)"><span class="glyphicon glyphicon-remove"></span></button>
                    </tr>
                  </tbody>
                </table>
              </div>
           </div>
        </div>


        <div class="modal fade" id="vacantionRequest" tabindex="-1" role="dialog" aria-labelledby="edit" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
              </div>
              <div class="modal-body">
                  <app-vacationrequest (saveVac)="saveVacation($event)"></app-vacationrequest>
              </div>
            </div>
          </div>
        </div>

        <div class="modal fade" id="homeRequest" tabindex="-1" role="dialog" aria-labelledby="edit" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
              </div>
              <div class="modal-body">
                  <app-homeofficerequest></app-homeofficerequest>
              </div>
            </div>
          </div>
        </div>

        <div class="modal fade" id="allRequests" tabindex="-1" role="dialog" aria-labelledby="edit" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
              </div>
              <div class="modal-body">
                  <app-requests></app-requests>
              </div>
            </div>
          </div>
        </div>
      <div>
        
      </div>


      </div>
    </div>
  </div>
</body>